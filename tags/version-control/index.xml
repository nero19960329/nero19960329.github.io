<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>wangzhao's site â€“ Version Control</title><link>/tags/version-control/</link><description>Recent content in Version Control on wangzhao's site</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Wed, 20 Apr 2022 16:49:00 +0800</lastBuildDate><atom:link href="/tags/version-control/index.xml" rel="self" type="application/rss+xml"/><item><title>Blog: ä½¿ç”¨çº¦å®šå¼æäº¤è¿›è¡Œè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶</title><link>/blog/semver-conventional-commit/</link><pubDate>Wed, 20 Apr 2022 16:49:00 +0800</pubDate><guid>/blog/semver-conventional-commit/</guid><description>
&lt;p>å…¨æ–‡æœºç¿»ï¼Œæœ‰å°å¹…è¯­æ³•è°ƒæ•´ï¼Œä¸ä¼šæˆ–æ— æ³•ç¿»è¯‘çš„éƒ¨åˆ†ä¿ç•™åŸæ–‡ã€‚&lt;/p>
&lt;p>åŸæ–‡: Semantic Versioning with Conventional Commits&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://platform.deloitte.com.au/articles/semantic-versioning-with-conventional-commits">https://platform.deloitte.com.au/articles/semantic-versioning-with-conventional-commits&lt;/a>&lt;/li>
&lt;/ul>
&lt;h2 id="ä½¿ç”¨çº¦å®šå¼æäº¤è¿›è¡Œè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶">ä½¿ç”¨çº¦å®šå¼æäº¤è¿›è¡Œè¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶&lt;/h2>
&lt;p>ç‰ˆæœ¬æ§åˆ¶å¾ˆé‡è¦ã€‚æˆ‘ä¸å¿…å‘Šè¯‰ä½ è¿™ä¸ªã€‚ç„¶è€Œï¼Œæˆ‘çœ‹åˆ°å®ƒä¸€éåˆä¸€éåœ°åšå¾—ä¸å¥½ã€‚&lt;/p>
&lt;p>æˆ‘ç»å¸¸é‡åˆ°çš„ç¼ºé™·æ˜¯ç¼ºä¹æ˜ç¡®çš„å¼€å‘å’Œå‘å¸ƒæµç¨‹ä»¥åŠè¾ƒå·®çš„å·¥å…·æ”¯æŒã€‚å¦‚æœä½ çš„å¼€å‘äººå‘˜ååœ¨é‚£é‡Œæƒ³çŸ¥é“å¦‚ä½•å®ŒæˆæŸäº›ä»»åŠ¡ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿‡ç¨‹å°±è¢«æ‰“ç ´äº†ã€‚ä»–ä»¬åº”è¯¥çŸ¥é“å¦‚ä½•å‘å¸ƒæ–°ç‰ˆæœ¬æˆ–å¦‚ä½•åœ¨ä¸»å¹²ç§»åŠ¨æ—¶ä¿®å¤ç”Ÿäº§ã€‚æ‚¨çš„ CI/CD æµç¨‹ä¹Ÿåº”è¯¥æ”¯æŒè¿™äº›åœºæ™¯ï¼&lt;/p>
&lt;p>è®¸å¤šäººä¾é ä»–ä»¬çš„ CI/CD å·¥å…·æ¥ç¡®å®šä»–ä»¬åº”ç”¨ç¨‹åºçš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ã€‚æˆ‘ä¹Ÿä¸ºæ­¤æ„Ÿåˆ°å†…ç–šï¼Œä½†åœ¨æŸäº›æ—¶å€™ï¼Œæˆ‘æ„è¯†åˆ°è¿™æ˜¯åªæœ‰å¼€å‘äººå‘˜æ‰èƒ½åšå‡ºçš„å†³å®šã€‚æˆ‘ä»¬çš„å·¥å…·è¿˜ä¸å¤Ÿæ™ºèƒ½ï¼Œæ— æ³•æŸ¥çœ‹ä»£ç æ›´æ”¹å¹¶å‘Šè¯‰æˆ‘å®ƒæ˜¯åŠŸèƒ½ã€ä¿®å¤è¿˜æ˜¯å…¶ä»–ä»€ä¹ˆã€‚&lt;/p>
&lt;p>è¿™è®©æˆ‘äº§ç”Ÿäº†æ”¹å˜æˆ‘ä»¬åšäº‹æ–¹å¼çš„å¼ºçƒˆæ„¿æœ›ã€‚æˆ‘çš„ç›®æ ‡æ˜¯æ‹¥æœ‰ä¸€ä¸ªæ¶µç›–æ‰€æœ‰è¿™äº›ç”¨ä¾‹çš„æ˜ç¡®æµç¨‹ï¼Œå¯¹å¼€å‘äººå‘˜å‹å¥½ï¼Œå¹¶åœ¨æˆ‘ä»¬å€¾å‘äºè·¨é¡¹ç›®ä½¿ç”¨çš„å„ç§ CI/CD å·¥å…·ä¸­å¾—åˆ°æ”¯æŒã€‚&lt;/p>
&lt;p>è¿™ç¯‡æ–‡ç« è®°å½•äº†è¿™ç§æ–¹æ³•ã€‚&lt;/p>
&lt;h3 id="è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶">è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶&lt;/h3>
&lt;p>æˆ‘ä»¬å°†åœ¨è¿™é‡Œä½¿ç”¨&lt;a href="https://semver.org/">è¯­ä¹‰ç‰ˆæœ¬æ§åˆ¶&lt;/a>(semver)ã€‚è¿™å¯èƒ½æ˜¯å½“ä»Šè½¯ä»¶ä¸­ä½¿ç”¨çš„æœ€çªå‡ºçš„ç‰ˆæœ¬æ§åˆ¶æ–¹æ¡ˆã€‚&lt;/p>
&lt;p>æˆ‘ä»¬æ„å»ºçš„å¤§å¤šæ•°åº”ç”¨ç¨‹åºå’Œåº“éƒ½å€¾å‘äºå…¬å¼€ä¸€ä¸ª APIï¼Œæ— è®ºæ˜¯ REST APIã€æ¥å£ç­‰ã€‚Semver å°±æ˜¯å¯¹è¿™ä¸ª API è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚&lt;/p>
&lt;p>è¯­æ³•æ˜¯ä¼—æ‰€å‘¨çŸ¥çš„ï¼š&lt;/p>
&lt;blockquote>
&lt;p>&amp;lt;MAJOR&amp;gt;.&amp;lt;MINOR&amp;gt;.&amp;lt;PATCH&amp;gt;&lt;/p>
&lt;/blockquote>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>MAJOR&lt;/th>
&lt;th>MINOR&lt;/th>
&lt;th>PATCH&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>å¼•å…¥æ–°çš„å‘åä¸å…¼å®¹æ›´æ”¹&lt;/td>
&lt;td>å¼•å…¥æ–°çš„å‘åå…¼å®¹æ›´æ”¹&lt;/td>
&lt;td>åœ¨ä¿æŒå‘åå…¼å®¹æ€§çš„åŒæ—¶ä¿®å¤ä¸€ä¸ªé”™è¯¯&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>1.0.0 -&amp;gt; 2.0.0&lt;/td>
&lt;td>1.0.0 -&amp;gt; 1.1.0&lt;/td>
&lt;td>1.0.0 -&amp;gt; 1.0.1&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>å¦‚è¡¨æ‰€ç¤ºï¼Œå‘åå…¼å®¹æ€§æ˜¯ç‰ˆæœ¬å†²çªçš„ä¸€å¤§åŒºåˆ«ã€‚&lt;/p>
&lt;p>æœ‰äº›äººä»ç„¶æ²¡æœ‰ææ‡‚ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œæˆ‘å°†ä½¿ç”¨ JSON REST API æ¥è¯´æ˜ä»€ä¹ˆæ„æˆè¡¥ä¸ã€åŠŸèƒ½æˆ–é‡å¤§æ›´æ”¹ã€‚&lt;/p>
&lt;p>è®©æˆ‘ä»¬å‡è®¾ä¸€ä¸ªç§°èŒçš„å¼€å‘äººå‘˜å·²ç»å®ç°äº†è¿™ä¸ª REST APIï¼Œå¹¶ä¸”å®ƒæˆåŠŸåœ°éµå¾ªäº† &lt;a href="https://en.wikipedia.org/wiki/Robustness_principle">Postel å®šå¾‹&lt;/a>ï¼š&lt;/p>
&lt;p>&lt;strong>Major&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>åˆ é™¤ä¸€ä¸ªæ“ä½œï¼Œæ¯”å¦‚åˆ é™¤ HTTP åŠ¨è¯/è·¯å¾„ç»„åˆ&lt;/li>
&lt;li>å‘æŸä¸ªè¯·æ±‚æ·»åŠ å¿…å¡«å­—æ®µ&lt;/li>
&lt;li>å‘æŸä¸ªè¯·æ±‚æ·»åŠ /åˆ é™¤å­—æ®µ
&lt;ul>
&lt;li>å¦‚æœæ‰€æœ‰ç”¨æˆ·è¢«è®¤ä¸ºè¶³å¤Ÿå®½å®¹ï¼Œé‚£ä¹ˆæ·»åŠ ä¸€ä¸ªå­—æ®µå¯èƒ½ä¸ä¼šæ˜¯ä¸€ä¸ªé‡å¤§å˜åŒ–&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Minor&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>æ·»åŠ ä¸€ä¸ªæ–°æ“ä½œï¼Œå³æ–°çš„ HTTP åŠ¨è¯/è·¯å¾„ç»„åˆ&lt;/li>
&lt;li>å‘è¯·æ±‚æ·»åŠ å¯é€‰å­—æ®µ&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Patch&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>æ²¡æœ‰æ¥å£å˜åŒ–&lt;/li>
&lt;/ul>
&lt;h3 id="çº¦å®šå¼æäº¤">çº¦å®šå¼æäº¤&lt;/h3>
&lt;p>å¦‚ä»Šï¼Œå°½ç®¡å·¥å…·éå¸¸å¥½ï¼Œä½†å®ƒä»¬è¿˜æ— æ³•è¯†åˆ«ä»£ç æ›´æ”¹çš„æœ¬è´¨ã€‚é€šè¿‡æœºå™¨å­¦ä¹ çš„é‚£ä¸€å¤©å°†ä¼šåˆ°æ¥ï¼Œè¿™å°†æ˜¯å¯èƒ½çš„ï¼Œä½†å°±ç›®å‰è€Œè¨€ï¼Œæˆ‘ä»¬å¿…é¡»ä¾é è‰¯å¥½çš„è€å¼äººç±»æ™ºèƒ½ã€‚&lt;/p>
&lt;p>&lt;a href="https://www.conventionalcommits.org/">çº¦å®šå¼æäº¤&lt;/a>æä¾›äº†åœ¨å¼€å‘äººå‘˜å’Œ CI/CD å·¥å…·ä¹‹é—´ä¼ è¾¾æäº¤ä¸­æ›´æ”¹çš„æ€§è´¨çš„æœºåˆ¶ã€‚&lt;/p>
&lt;p>ç®€è€Œè¨€ä¹‹ï¼Œå¼€å‘äººå‘˜æä¾›äº†ä¸€ä¸ªæäº¤æ¶ˆæ¯ï¼Œè¯¥æ¶ˆæ¯æ˜ç¡®åœ°æ ‡è¯†äº†æ›´æ”¹çš„æ€§è´¨ã€‚ç„¶å CI/CD å·¥å…·å¯ä»¥æ‰«æè‡ªä¸Šä¸€ä¸ªç‰ˆæœ¬ä»¥æ¥çš„æ‰€æœ‰æäº¤æ¶ˆæ¯ï¼Œå¹¶ç¡®å®šå¦‚ä½•æ›´æ–°ç‰ˆæœ¬ã€‚&lt;/p>
&lt;p>é™¤äº†è¿™ç§è‡ªåŠ¨åŒ–ä¹‹å¤–ï¼Œè¿™ç§æ–¹æ³•è¿˜ä¸ºå…¶ä»–å›¢é˜Ÿæˆå‘˜æä¾›äº†æ¸…æ™°çš„å˜æ›´æ²Ÿé€šï¼Œç”šè‡³è®©æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆå‘å¸ƒ release note å’Œ changelogã€‚&lt;/p>
&lt;p>çº¦å®šæ˜¯æäº¤çš„å®˜æ–¹&lt;a href="https://www.conventionalcommits.org/en/v1.0.0/#summary">æ€»ç»“&lt;/a>å’Œ&lt;a href="https://www.conventionalcommits.org/en/v1.0.0/#examples">ç¤ºä¾‹&lt;/a>éå¸¸ç®€æ´ï¼Œæˆ‘æ²¡æœ‰å¿…è¦åœ¨è¿™é‡Œé‡å¤å®ƒä»¬ã€‚æ¥çœ‹çœ‹å§ã€‚æˆ‘ä¼šåœ¨è¿™é‡Œç­‰ä½ ã€‚&lt;/p>
&lt;p>ä»¥ä¸‹æ˜¯æˆ‘ä»¬çš„ JSON REST API çš„ä¸€äº›ç¤ºä¾‹æäº¤ï¼š&lt;/p>
&lt;p>&lt;strong>Major&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>&lt;strong>feat:&lt;/strong> disable deletion of records&lt;/p>
&lt;p>&lt;strong>BREAKING CHANGE:&lt;/strong> removed and endpoint&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;strong>feat:&lt;/strong> expiry date must be provided by the user&lt;/p>
&lt;p>&lt;strong>BREAKING CHANGE:&lt;/strong> new mandatory field in create operation&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Minor&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>feat(my-operation):&lt;/strong> allow users to provide an optional name to override the default&lt;/li>
&lt;li>&lt;strong>feat&lt;/strong>: add operation to retrieve sub-records&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Patch&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>fix:&lt;/strong> remove the infinite loop&lt;/li>
&lt;li>&lt;strong>fix(my-operation):&lt;/strong> handle null input field&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>N/A&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>&lt;strong>test:&lt;/strong> refactor user management test cases&lt;/li>
&lt;li>&lt;strong>ci&lt;/strong>: point to the new registry&lt;/li>
&lt;li>&lt;strong>docs&lt;/strong>: add missing method documentation in create operation&lt;/li>
&lt;/ul>
&lt;p>å¦‚æœæ‚¨çš„å›¢é˜Ÿæ›´â€œæœ‰è¶£â€ï¼Œæ‚¨å¯ä»¥éšæ—¶å°è¯•è¿™äº›æ›¿ä»£ä¿¡å·ï¼šâœ¨ (feat), ğŸ› (fix), ğŸ“š (docs), ğŸ’ (style), â™»ï¸ (refactor), ğŸš€ (perf), âœ… (test), ğŸ“¦ (build), ğŸ‘· (ci), ğŸ”§ (chore)&lt;/p>
&lt;h3 id="ä½ åœ¨æ„å»ºä»€ä¹ˆ">ä½ åœ¨æ„å»ºä»€ä¹ˆï¼Ÿ&lt;/h3>
&lt;p>å¦‚æœæ‚¨æ›¾åœ¨è½¯ä»¶å¼€å‘ä¸­èŠ±è´¹è¿‡ä»»ä½•æ—¶é—´ï¼Œæ‚¨å°±ä¼šçŸ¥é“æå€¡â€œä¸€åˆ€åˆ‡â€çš„äººéœ€è¦æ»šè›‹äº†ã€‚å› æ­¤ï¼Œåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘æƒ³ç ”ç©¶ä¸¤ç§æˆªç„¶ä¸åŒçš„è½¯ä»¶å‘å¸ƒæ–¹æ³•ï¼Œä»¥åŠå¦‚ä½•å°†è¿™ç§æŠ€æœ¯åº”ç”¨äºè¿™ä¸¤ç§æ–¹æ³•ã€‚&lt;/p>
&lt;p>&lt;strong>åˆå¹¶åå‘å¸ƒ&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>æè¿°
&lt;ul>
&lt;li>ä¸»å¹²åˆ†æ”¯ä¸Šçš„æ¯ä¸ªæäº¤éƒ½æ˜¯å…·æœ‰æ–°è¯­ä¹‰ç‰ˆæœ¬çš„å‘å¸ƒ&lt;/li>
&lt;li>æ–°ç‰ˆæœ¬æ²¡ä»€ä¹ˆå¤§ä¸äº†çš„ï¼Œç‰ˆæœ¬ä¸è¢«è§†ä¸ºç¥åœ£çš„æœ‰é™èµ„æº&lt;/li>
&lt;li>ä¸€ä¸ªåº”ç”¨ç¨‹åºæ¯å¤©å¯èƒ½ä¼šç»å†å¤šä¸ªç‰ˆæœ¬&lt;/li>
&lt;li>ä¿®æ”¹éœ€è¦é€šè¿‡ QA å…³å¡ï¼Œæ¯”å¦‚å•å…ƒæµ‹è¯•ã€åŒäº‹è¯„å®¡ã€MR æ„å»ºç”šè‡³ &lt;a href="https://docs.gitlab.com/ee/ci/review_apps/">review app&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä¼˜åŠ¿
&lt;ul>
&lt;li>æ— é¢„å…ˆå‘ç‰ˆè®¡åˆ’ã€‚åœ¨éœ€è¦æ—¶é€‰æ‹©è¦å‘å¸ƒçš„ç‰ˆæœ¬&lt;/li>
&lt;li>å¯¹æµ‹è¯•äººå‘˜å’Œæœ€ç»ˆç”¨æˆ·çš„åé¦ˆå¾ªç¯æ›´çŸ­&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä½¿ç”¨æ—¶æœº
&lt;ul>
&lt;li>ä¾›åº”å•†/é¡¾é—®äº¤ä»˜çš„é¡¹ç›®&lt;/li>
&lt;li>æœ‰å¤šä¸ªéç”Ÿäº§ç¯å¢ƒå¯ç”¨äºå¿«é€Ÿéƒ¨ç½²å’Œæµ‹è¯•æ›´æ”¹çš„é¡¹ç›®&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>é¢„å‘å¸ƒåæ­£å¼å‘å¸ƒ&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>æè¿°
&lt;ul>
&lt;li>æ¯ä¸ªç‰ˆæœ¬ä¹‹å‰éƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ª alpha å’Œ beta ç‰ˆæœ¬å½¢å¼çš„é¢„å‘å¸ƒ&lt;/li>
&lt;li>ç‰ˆæœ¬æ›´æ–°è¢«è®¤ä¸ºæ˜¯çè´µçš„&lt;/li>
&lt;li>ä»é¢„å‘å¸ƒç‰ˆæœ¬ä¸­åˆ é™¤ç‰ˆæœ¬æ—¶éœ€è¦é‡æ–°æµ‹è¯•&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä¼˜åŠ¿
&lt;ul>
&lt;li>é€šè¿‡åœ¨å¼•å…¥ç¨³å®šç‰ˆæœ¬ä¹‹å‰å‘å¸ƒé¢„å‘å¸ƒæ¥è·å¾—å……åˆ†çš„ä¿¡å¿ƒ&lt;/li>
&lt;li>æ‚¨çš„ç”¨æˆ·ä¸å¿…åƒåœ¨å…¶ä»–æ–¹æ³•ä¸­é‚£æ ·æƒ³çŸ¥é“é¢„å‘å¸ƒç‰ˆæœ¬å‘ç”Ÿäº†ä»€ä¹ˆ&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>ä½¿ç”¨æ—¶æœº
&lt;ul>
&lt;li>åº“ã€è½¯ä»¶äº§å“å’Œå¼€æºé¡¹ç›®&lt;/li>
&lt;li>ç¨³å®šå‘å¸ƒèŠ‚å¥è¾ƒæ…¢çš„é¡¹ç›®&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>æˆ‘å·²ç»åœ¨å¾ˆå¤šåœ°æ–¹çœ‹åˆ°äº†è¿™ä¸¤ç§æ–¹æ³•çš„è®¸å¤šå˜ä½“ï¼Œå› æ­¤æˆ‘ä»¬å°†åœ¨è¿™é‡Œè®¨è®ºçš„å†…å®¹ä¹Ÿåº”è¯¥åŒæ ·é€‚ç”¨äºè¿™äº›æ–¹æ³•ã€‚ è™½ç„¶æˆ‘åº”è¯¥æåˆ°æˆ‘å€¾å‘äºé¿å…ç ´åç‰ˆæœ¬ä¸å˜æ€§çš„æ ·å¼ï¼Œä¾‹å¦‚ Maven ä¸­çš„ SNAPSHOT ç‰ˆæœ¬æˆ– NPM ä¸­çš„ @next disributaion channelã€‚&lt;/p>
&lt;h3 id="pull-requests">Pull Requests&lt;/h3>
&lt;p>æ— è®ºæ‚¨å¦‚ä½•å‘å¸ƒï¼Œæˆ‘éƒ½å¸Œæœ›æ‚¨é€šè¿‡ PRï¼ˆæœ‰æ—¶ç§°ä¸º MRï¼‰å¼•å…¥æ–°åŠŸèƒ½ã€‚ å¦‚æœä½ ä¸æ˜¯ï¼Œæˆ‘ä»¬æœ‰æ¯”ç‰ˆæœ¬æ§åˆ¶æ›´å¤§çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>ç†æƒ³æƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ‹‰å–è¯·æ±‚éƒ½åº”åŒ…å«ä¸€ä¸ªåŠŸèƒ½æˆ–ä¿®å¤ã€‚ ä½œä¸ºæ‹‰å–è¯·æ±‚å®¡æŸ¥çš„ä¸€éƒ¨åˆ†ï¼Œå¼€å‘äººå‘˜å¯èƒ½éœ€è¦æäº¤æ›´å¤šæ›´æ”¹ä»¥è§£å†³å®¡æŸ¥æ„è§ã€‚ ä½†æ˜¯è¿™äº›é¢å¤–çš„æäº¤å¹¶ä¸æ˜¯ä¸»å¹²ä¸Šçš„æ–°åŠŸèƒ½æˆ–ä»£ç ä¿®å¤ã€‚&lt;/p>
&lt;p>æˆ‘çš„è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨ squash merge ç­–ç•¥ã€‚ è¿™æ ·ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨åŠŸèƒ½/ä¿®å¤åˆ†æ”¯ä¸Šå¯¹ä»–ä»¬çš„æäº¤æ¶ˆæ¯åšä»»ä½•ä»–ä»¬å–œæ¬¢çš„äº‹æƒ…ã€‚ è¿™äº›æäº¤å°†å…¨éƒ¨æ¶ˆå¤±ï¼Œå¼€å‘äººå‘˜å¯ä»¥åœ¨åˆå¹¶ç‚¹ä¸ºæ•´ä¸ªæ‹‰å–è¯·æ±‚æä¾›çº¦å®šæ˜¯æäº¤æ¶ˆæ¯ã€‚&lt;/p>
&lt;p>&lt;img src="https://s1.ax1x.com/2023/03/27/ppyF6Mj.png" alt="">&lt;/p>
&lt;p>å¤§å¤šæ•°ä½“é¢çš„ Git å­˜å‚¨åº“è¿˜å…è®¸æ‚¨ä½¿ç”¨æ‚¨çš„æ‹‰å–è¯·æ±‚åç§°ä½œä¸ºæ‚¨çš„ squash æäº¤æ¶ˆæ¯ã€‚ å¦‚æœæ‚¨å¸Œæœ›ä»å¼€å‘äººå‘˜é‚£é‡Œçœ‹åˆ°ä¸€è‡´çš„æ‹‰å–è¯·æ±‚åç§°å¹¶è®©å®¡é˜…è€…ç”šè‡³åœ¨æ‰¹å‡†ä¹‹å‰å®¡é˜… squash æäº¤æ¶ˆæ¯ï¼Œè¿™å¾ˆå¥½ã€‚&lt;/p>
&lt;h3 id="åˆå¹¶åå‘å¸ƒçš„åˆ†æ”¯ç­–ç•¥">åˆå¹¶åå‘å¸ƒçš„åˆ†æ”¯ç­–ç•¥&lt;/h3>
&lt;p>ä¸ç®¡å‘å¸ƒé£æ ¼å¦‚ä½•ï¼Œæˆ‘å€¾å‘äºåŸºäºä¸»å¹²ï¼ˆä¸»çº¿ï¼‰çš„åˆ†æ”¯ã€‚æˆ‘é¿å…ä½¿ç”¨ Gitflowï¼Œå› ä¸ºæˆ‘è¶³å¤Ÿå…³å¿ƒæˆ‘çš„å¼€å‘äººå‘˜ï¼Œä»¥å…ä»–ä»¬æ¯å¤©éƒ½èŠ±åœ¨è§£å†³åˆå¹¶å†²çªä¸Šã€‚æ›´ä¸ç”¨è¯´ï¼Œä»…ä»…å› ä¸ºä½ ä» develop åˆå¹¶åˆ° master å°±é‡æ–°æ„å»ºç›¸åŒç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºï¼Œé¢å¯¹â€œä¸€æ¬¡æ„å»ºï¼Œå¤šæ¬¡éƒ¨ç½²â€çš„CI/CDå®è·µã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘å·²ç»å®Œæˆäº†æˆ‘å¯¹ GitFlow çš„æ¯æ—¥ä¸€å–·ï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥è°ˆè°ˆæˆ‘ä»¬åœ¨æ¯æ¬¡åˆå¹¶æ—¶å‘å¸ƒæ—¶å¦‚ä½•è¿›è¡Œåˆ†æ”¯ã€‚&lt;/p>
&lt;p>è¿™å¾ˆç®€å•ï¼šåˆ›å»ºä¸€ä¸ªåŠŸèƒ½/ä¿®å¤åˆ†æ”¯å¹¶éµå¾ªä¸Šé¢çš„æ‹‰å–è¯·æ±‚è¿‡ç¨‹ã€‚&lt;/p>
&lt;p>ä½œä¸º CI/CD æµç¨‹è®¾è®¡å¸ˆï¼Œæ‚¨çš„ä¸»è¦ç›®æ ‡ä¹‹ä¸€åº”è¯¥æ˜¯ï¼šå¼€å‘äººå‘˜æœ€å¸¸åšçš„ä»»ä½•äº‹æƒ…éƒ½åº”è¯¥æ˜¯æœ€å®¹æ˜“åšåˆ°çš„ã€‚æˆ‘è§‰å¾—ä¸Šé¢ç¬¦åˆè¿™ä¸ªæ ‡å‡†ã€‚&lt;/p>
&lt;p>ä¸å¤ªå¸¸è§çš„æƒ…å†µä¹Ÿæ²¡æœ‰é‚£ä¹ˆå›°éš¾ã€‚å‡è®¾å¼€å‘äººå‘˜æ­£åœ¨æ„å»ºåº”ç”¨ç¨‹åºçš„æ–°ä¸»è¦ç‰ˆæœ¬ï¼Œä½†ä¹‹å‰çš„ä¸»è¦ç‰ˆæœ¬å­˜åœ¨ç”Ÿäº§ç¼ºé™·ï¼Œéœ€è¦çƒ­ä¿®å¤ã€‚è¿™æ˜¯æ‰§è¡Œæ­¤ä¿®è¡¥ç¨‹åºçš„å‰§æœ¬ï¼š&lt;/p>
&lt;ol>
&lt;li>æ‰¾å‡ºç”Ÿäº§ä¸­çš„æ¬¡è¦ç‰ˆæœ¬ã€‚æ¯”æ–¹è¯´v1.3ã€‚&lt;/li>
&lt;li>ä»è¯¥æ¬¡è¦ç‰ˆæœ¬çš„æœ€æ–°è¡¥ä¸ç‰ˆæœ¬åˆ›å»º v1.3.x åˆ†æ”¯ï¼Œä¾‹å¦‚v1.3.6ã€‚&lt;/li>
&lt;li>åˆ›å»ºä¸€ä¸ªä¿®å¤åˆ†æ”¯å¹¶å°†ä¿®å¤è¯·æ±‚æ‹‰å› v1.3.x&lt;/li>
&lt;li>ä» v1.3.x åˆ†æ”¯æ„å»ºã€éƒ¨ç½²å’Œå‡çº§åˆ°ç”Ÿäº§&lt;/li>
&lt;li>é€šè¿‡å°† v1.3.x åˆ†æ”¯åˆå¹¶åˆ° master å°†ä¿®å¤ç§»æ¤åˆ°ä¸»çº¿&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://s1.ax1x.com/2023/03/27/ppyFgLn.png" alt="">&lt;/p>
&lt;h3 id="é¢„å‘å¸ƒåæ­£å¼å‘å¸ƒçš„åˆ†æ”¯ç­–ç•¥">é¢„å‘å¸ƒåæ­£å¼å‘å¸ƒçš„åˆ†æ”¯ç­–ç•¥&lt;/h3>
&lt;p>åœ¨æ­¤æ–¹æ³•ä¸­ï¼Œæ‚¨å°†åœ¨é¢„å‘å¸ƒåˆ†æ”¯ä¸Šå¼•å…¥é‡å¤§æ›´æ”¹ã€‚ ä½ å¯ä»¥ä½¿ç”¨ä»»ä½•ä½ å–œæ¬¢çš„æ»‘ç¨½åç§°ï¼Œä½†æˆ‘ä¼šåšæŒä½¿ç”¨ä¼ ç»Ÿçš„ alpha/beta æœ¯è¯­ã€‚&lt;/p>
&lt;p>æœ¬è´¨ä¸Šï¼Œæ‚¨åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªé¢„å‘å¸ƒåˆ†æ”¯ä¸Šå·¥ä½œï¼Œç›´åˆ°æ‚¨å‡†å¤‡å¥½å‘æ‚¨çš„ç”¨æˆ·å‘å¸ƒæ–°ç‰ˆæœ¬ï¼›æ­¤æ—¶ï¼Œæ‚¨åªéœ€å°†é¢„å‘å¸ƒåˆ†æ”¯åˆå¹¶åˆ°ä¸»å¹²ä¸­ã€‚&lt;/p>
&lt;p>è¯¥å›¾é€šè¿‡åœ¨ä¸‹ä¸€ä¸ªè§„èŒƒç‰ˆæœ¬å‡çº§ä¹‹å‰å‘å¸ƒ 2 ä¸ª alpha å’Œ 1 ä¸ª beta ç‰ˆæœ¬æ¥è¯æ˜è¿™ä¸€ç‚¹ã€‚&lt;/p>
&lt;p>&lt;img src="https://s1.ax1x.com/2023/03/27/ppyFcss.png" alt="">&lt;/p>
&lt;p>ä¸Šå›¾è¿˜å±•ç¤ºäº†åœ¨æ‰€æœ‰è¿™äº›é¢„å‘å¸ƒå·¥ä½œæœŸé—´å¯¹ç”Ÿäº§çš„ä¿®è¡¥ç¨‹åºã€‚&lt;/p>
&lt;p>ä¸ç”¨è¯´ï¼Œæ‚¨å¯ä»¥æ‹¥æœ‰æ›´å°‘æˆ–æ›´å¤šçš„é¢„å‘å¸ƒåˆ†æ”¯ï¼Œç”šè‡³å¯ä»¥æ ¹æ®éœ€è¦åœ¨å®ƒä»¬ä¹‹é—´æ¥å›åˆå¹¶ã€‚ è¿™å®Œå…¨å–å†³äºæ‚¨çš„ä¸ªäººå‘å¸ƒé£æ ¼ã€‚&lt;/p>
&lt;h3 id="å·¥å…·ä¸­çš„å®ç°">å·¥å…·ä¸­çš„å®ç°&lt;/h3>
&lt;p>è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„ç‰ˆæœ¬æ§åˆ¶å’Œåˆ†æ”¯æ–¹æ³•å¦‚ä½•åº”ç”¨äºå„ç§æºä»£ç ç®¡ç†å’Œ CI/CD å¹³å°ã€‚&lt;/p>
&lt;p>è™½ç„¶æ‚¨å¯ä»¥è®©å¼€å‘äººå‘˜éµå®ˆçº¦å®šæ˜¯æäº¤ï¼Œä½†è¿™éœ€è¦æˆ‘åœ¨æˆ‘ä»¬çš„ä¸“ä¸šä¸­å‡ ä¹çœ‹ä¸åˆ°çš„åƒ§ä¾£èˆ¬çš„çºªå¾‹æ°´å¹³ã€‚å› æ­¤ï¼Œåœ¨ç›¸å…³åˆ†æ”¯ä¸Šå¼ºåˆ¶æ‰§è¡Œæäº¤æ¶ˆæ¯æ ¼å¼æ›´ä¸ºæ˜æ™ºã€‚å¤§å¤šæ•° SCM æä¾›æ­¤åŠŸèƒ½ä½œä¸ºæœåŠ¡å™¨ç«¯æŒ‚é’©ã€‚&lt;/p>
&lt;p>å¯¹äºä¸€äº›äººæ¥è¯´ï¼Œæ„è¯†åˆ°ä»–ä»¬çš„æäº¤æ¶ˆæ¯åœ¨æœåŠ¡å™¨ä¸Šä¸æ­£ç¡®å·²ç»å¤ªæ™šäº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œæœ‰ä¸€äº›å·¥å…·ï¼Œä¾‹å¦‚ &lt;a href="http://commitizen.github.io/cz-cli/">Commitizen&lt;/a>ã€&lt;a href="https://commitlint.js.org/">commitlint&lt;/a> ç”šè‡³æ˜¯ä¸€ä¸ªç®€å•çš„ &lt;a href="https://pre-commit.com/">pre-commit&lt;/a>ï¼Œå¯ä»¥å°½æ—©è­¦å‘Šç”¨æˆ·ã€‚&lt;/p>
&lt;p>è™½ç„¶å¦‚æœä½ éµå¾ªæˆ‘ä»¬çš„ squash merge ç­–ç•¥ï¼Œä½ å°±ä¸å¿…å…³å¿ƒä½ çš„æœ¬åœ°æäº¤æ¶ˆæ¯ã€‚&lt;/p>
&lt;p>ç„¶è€Œï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å…é™¤å…³å¿ƒé•¿æœŸå­˜åœ¨çš„åˆ†æ”¯ä¸Šçš„æäº¤ã€‚å› æ­¤ï¼Œå§‹ç»ˆå»ºè®®ç¡®ä¿æ„å»ºè¿‡ç¨‹éªŒè¯è‡ªä¸Šæ¬¡æ„å»ºä»¥æ¥è¿™äº›åˆ†æ”¯ä¸Šçš„æäº¤å†å²è®°å½•ï¼Œä»¥ç¡®ä¿æ‰€æœ‰æäº¤æ¶ˆæ¯éƒ½ç¬¦åˆè¦æ±‚ã€‚&lt;/p>
&lt;p>é€šå¸¸ï¼Œæˆ‘ä»¬åœ¨ CI/CD æµç¨‹ä¸­è‡³å°‘å…·å¤‡ä»¥ä¸‹æ¡ä»¶ï¼š&lt;/p>
&lt;ul>
&lt;li>åœ¨æ¯æ¬¡ PR æ„å»ºæ—¶ï¼ŒéªŒè¯è‡ªä¸Šæ¬¡æ„å»ºä»¥æ¥çš„æ‰€æœ‰æäº¤æ¶ˆæ¯ï¼Œä»¥ç¡®ä¿å®ƒä»¬éµå¾ªçº¦å®šå¼æäº¤&lt;/li>
&lt;li>åœ¨ä¸»å¹²æ„å»ºä¸­ï¼Œé™¤äº†å¸¸è§„æµ‹è¯•ä¹‹å¤–ï¼š&lt;/li>
&lt;/ul>
&lt;ol>
&lt;li>éªŒè¯æäº¤æ¶ˆæ¯&lt;/li>
&lt;li>é€šè¿‡åˆ†ææäº¤æ¶ˆæ¯å’Œä»¥å‰çš„æ ‡ç­¾ç¡®å®šä¸‹ä¸€ä¸ªç‰ˆæœ¬&lt;/li>
&lt;li>ç”¨æ–°ç‰ˆæœ¬æ ‡è®°å½“å‰æäº¤&lt;/li>
&lt;li>å¯é€‰æ‹©ç”Ÿæˆ relase note&lt;/li>
&lt;li>å‘å¸ƒ artifacts&lt;/li>
&lt;/ol>
&lt;p>ç»™æäº¤æ‰“ tag ä»¥å°†å…¶æ ‡è¯†ä¸ºåº”ç”¨ç¨‹åºç‰ˆæœ¬çš„æ¥æºæ˜¯ä¸€ç§æœ‰ä»·å€¼çš„åšæ³•ã€‚å®ƒä½¿ Git å­˜å‚¨åº“æˆä¸ºä¸€ä¸ªç‹¬ç«‹çš„çœŸå®æ¥æºï¼Œå¹¶æ¶ˆé™¤äº†å¯¹ CI/CD å·¥å…·çš„ä¸€äº›è¿‡åº¦ä¾èµ–ã€‚æˆ‘ä¸æ­¢ä¸€æ¬¡çœ‹åˆ°å›¢é˜Ÿåœ¨ä½¿ç”¨ CI/CD ä½œä¸ºäº‹å®æ¥æºæ—¶ä¸å¾—ä¸é‡æ–°å¼€å§‹ä»–ä»¬çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œä½†éšåä»–ä»¬ä¸å¾—ä¸è¿ç§»åˆ°ä¸åŒçš„å·¥å…·ï¼Œæˆ–è€…è¯¥å·¥å…·å‡ºç°äº†ä¸å¯æ¢å¤çš„æ•…éšœã€‚&lt;/p>
&lt;p>ç°åœ¨æˆ‘ä»¬çŸ¥é“éœ€è¦åšä»€ä¹ˆï¼Œæˆ‘ä»¬éœ€è¦å¼„æ¸…æ¥šå¦‚ä½•å»åšã€‚è¿™ä¼¼ä¹éœ€è¦å®ç°å¾ˆå¤šåŠŸèƒ½ã€‚å¹¸è¿çš„æ˜¯ï¼Œå·²ç»æœ‰ä¸€äº›å·¥å…·å¯ä»¥ä¸ºæˆ‘ä»¬å®Œæˆæ‰€æœ‰è¿™äº›å·¥ä½œã€‚æˆ‘ç›®å‰é¦–é€‰çš„å·¥å…·æ˜¯ &lt;a href="https://github.com/semantic-release/semantic-release">semantic-release&lt;/a>ï¼Œå®ƒæä¾›äº†ä»¥ä¸Šæ‰€æœ‰ä»¥åŠæ›´å¤šã€‚&lt;/p>
&lt;h3 id="semantic-release">semantic-release&lt;/h3>
&lt;p>semantic-release æä¾›äº†ä¸€ä¸ªå‘½ä»¤è¡Œç•Œé¢ (CLI)ï¼Œä»»ä½• CI/CD å·¥å…·éƒ½å¯ä»¥è°ƒç”¨å®ƒã€‚ å…ˆå†³æ¡ä»¶æ˜¯ NodeJS å’Œ Gitã€‚&lt;/p>
&lt;p>è¯­ä¹‰å‘å¸ƒçš„ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å®ƒå¯ä»¥ä½¿ç”¨æ’ä»¶è¿›è¡Œæ‰©å±•ã€‚ å®˜æ–¹æ’ä»¶è®©æ‚¨å¯ä»¥åˆ›å»ºå‘å¸ƒè¯´æ˜å’Œå˜æ›´æ—¥å¿—æ–‡ä»¶ï¼Œå°†å‘å¸ƒå‘å¸ƒåˆ° GitHub å’Œ Gitlabï¼Œå°†åŒ…å‘å¸ƒåˆ° NPM å’Œ APM ç­‰ã€‚è¿˜æœ‰å¾ˆå¤šç¤¾åŒºæ’ä»¶ã€‚&lt;/p>
&lt;p>æˆ‘å°†ä½¿ç”¨ GitLab æ¥è¯´æ˜å¦‚ä½•é…ç½®å’Œä½¿ç”¨è¿™ä¸ªå·¥å…·ï¼Œä½†è¿™ç§æ–¹æ³•å¯ä»¥å¾ˆå®¹æ˜“åœ°è½¬æ¢ä¸ºå…¶ä»– CI/CD å·¥å…·ã€‚&lt;/p>
&lt;p>æˆ‘å°†ä½¿ç”¨ GitLab çš„ &lt;a href="https://docs.gitlab.com/runner/executors/docker.html">Docker æ‰§è¡Œå™¨&lt;/a>åœ¨å®¹å™¨ä¸­è¿è¡Œæˆ‘çš„æ„å»ºï¼Œæ‰€ä»¥é¦–å…ˆï¼Œæˆ‘éœ€è¦åˆ›å»ºä¸€ä¸ªå…·æœ‰è¯­ä¹‰å‘å¸ƒå’Œæˆ‘éœ€è¦çš„æ‰€æœ‰æ’ä»¶çš„ Docker æ˜ åƒã€‚&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-docker" data-lang="docker">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">FROM&lt;/span>&lt;span style="color:#4e9a06"> node:14.3.0&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">LABEL&lt;/span> &lt;span style="color:#000">maintainer&lt;/span>&lt;span style="color:#ce5c00;font-weight:bold">=&lt;/span>&lt;span style="color:#4e9a06">&amp;#34;sohrab&amp;#34;&lt;/span>&lt;span style="color:#a40000">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a40000">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">RUN&lt;/span> npm install --global &lt;span style="color:#4e9a06">\\&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> semantic-release@17.0.8 &lt;span style="color:#4e9a06">\\&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> @semantic-release/exec@5.0.0 &lt;span style="color:#4e9a06">\\&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> @semantic-release/gitlab@6.0.4&lt;span style="color:#a40000">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ï¼ˆæ˜¯çš„ï¼Œæˆ‘å¯¹æ‰€æœ‰å†…å®¹éƒ½è¿›è¡Œäº†ç‰ˆæœ¬æ§åˆ¶ã€‚å°±åƒä¸“ä¸šäººå£«ä¸€æ ·ã€‚â€œå¯é‡å¤ã€å¯é çš„æ„å»ºâ€æ˜¯å¦ä¸€ä¸ª CI/CD åŸåˆ™ã€‚å¦‚æœæ‚¨è¦é‡å¤ä½¿ç”¨å®ƒï¼Œè¯·æŸ¥çœ‹ &lt;a href="http://npmjs.com/">npmjs.com&lt;/a> ä»¥è·å–æœ€æ–°ç‰ˆæœ¬ã€‚ï¼‰&lt;/p>
&lt;p>æ¥ä¸‹æ¥ï¼Œæˆ‘éœ€è¦ä¸ºæˆ‘çš„å­˜å‚¨åº“é…ç½®è¯­ä¹‰å‘å¸ƒã€‚ æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†åœ¨è¿™é‡Œæˆ‘å°† .releaserc.json æ–‡ä»¶æ”¾åœ¨æˆ‘çš„å­˜å‚¨åº“çš„æ ¹ç›®å½•ä¸­ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;plugins&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;@semantic-release/commit-analyzer&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;@semantic-release/release-notes-generator&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;@semantic-release/gitlab&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">[&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#4e9a06">&amp;#34;@semantic-release/exec&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">,&lt;/span> &lt;span style="color:#000;font-weight:bold">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#204a87;font-weight:bold">&amp;#34;successCmd&amp;#34;&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span> &lt;span style="color:#4e9a06">&amp;#34;echo \\&amp;#34;&lt;/span>&lt;span style="color:#a40000">VERSION=$&lt;/span>&lt;span style="color:#000;font-weight:bold">{&lt;/span>&lt;span style="color:#a40000">nextRelease.version&lt;/span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>&lt;span style="color:#a40000">\\&lt;/span>&lt;span style="color:#4e9a06">&amp;#34; &amp;gt;&amp;gt; vars.env&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#000;font-weight:bold">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#000;font-weight:bold">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>è¿™å°†åªå¯ç”¨æˆ‘æƒ³è¦ä½¿ç”¨çš„æ’ä»¶ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼š&lt;/p>
&lt;ul>
&lt;li>commit-analyzer é€šè¿‡åˆ†æ repo çš„æäº¤å†å²æ¥ç¡®å®šä¸‹ä¸€ä¸ªç‰ˆæœ¬&lt;/li>
&lt;li>release-notes-generator ä»¥ä¼ ç»Ÿçš„å˜æ›´æ—¥å¿—æ ¼å¼ç”Ÿæˆå‘è¡Œè¯´æ˜&lt;/li>
&lt;li>gitlab å°†å‘è¡Œè¯´æ˜å‘å¸ƒä¸º GitLab Release&lt;/li>
&lt;li>exec å°†å‘å¸ƒç‰ˆæœ¬å†™å…¥ dot-env æ–‡ä»¶ï¼Œä»¥ä¾¿åœ¨åç»­é˜¶æ®µä¸­å¯ç”¨&lt;/li>
&lt;/ul>
&lt;p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦é…ç½® CI/CD æœ¬èº«ã€‚ è¿™é‡Œå®ƒæ˜¾ç¤ºåœ¨ GitLab YAML ä¸­ã€‚ å³ä½¿æ‚¨ä»¥å‰ä»æœªä½¿ç”¨è¿‡ GitLabï¼Œè¿™ä¹Ÿåº”è¯¥æ˜¯ä¸è¨€è‡ªæ˜çš„ï¼Œå¹¶ä¸”å¯ä»¥ç¿»è¯‘æˆå…¶ä»– CI/CD å·¥å…·ï¼š&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#204a87;font-weight:bold">stages&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">version&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">build&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">version&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">image&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">semantic-release&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">script&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">semantic-release&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">artifacts&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">reports&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">dotenv&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">vars.env&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">rules&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">if&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#39;$CI_MERGE_REQUEST_TARGET_BRANCH_NAME == &amp;#34;master&amp;#34;&amp;#39;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">when&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">on_success&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline">&lt;/span>&lt;span style="color:#204a87;font-weight:bold">build&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">image&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">...&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">script&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#8f5902;font-style:italic"># run all tests, build, package and publish the artifact&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#000">...&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">rules&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>- &lt;span style="color:#204a87;font-weight:bold">if&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#4e9a06">&amp;#39;$VERSION&amp;#39;&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#204a87;font-weight:bold">when&lt;/span>&lt;span style="color:#000;font-weight:bold">:&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline"> &lt;/span>&lt;span style="color:#000">on_success&lt;/span>&lt;span style="color:#f8f8f8;text-decoration:underline">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç”± version stage ç”Ÿæˆçš„ vars.env æ–‡ä»¶ä¸­çš„ VERSION ç¯å¢ƒå˜é‡éšåå¯ä»¥è¢«æ„å»ºé˜¶æ®µç”¨äºå¯¹ artifact è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ²¡æœ‰äº§ç”Ÿæ–°ç‰ˆæœ¬ï¼Œæˆ‘ä»¬ä¼šè·³è¿‡æ„å»ºå’Œå‘å¸ƒã€‚&lt;/p>
&lt;p>æœ€åä¸€ç‚¹é…ç½®æ˜¯ç¡®ä¿è¯­ä¹‰å‘å¸ƒå¯ä»¥å°†æ ‡ç­¾æ¨é€åˆ°æ‚¨çš„å­˜å‚¨åº“ä¸­ã€‚ä¸ºæ­¤ï¼Œæ‚¨éœ€è¦å‘è¯¥å·¥å…·æä¾› &lt;a href="https://github.com/semantic-release/semantic-release/blob/master/docs/usage/ci-configuration.md#authentication">Git èº«ä»½éªŒè¯è¯¦ç»†ä¿¡æ¯&lt;/a>ã€‚åœ¨æˆ‘çš„ç”¨ä¾‹ä¸­ï¼Œè¿™æ˜¯è®¾ç½® GITLAB_TOKEN ç¯å¢ƒå˜é‡çš„é—®é¢˜ã€‚&lt;/p>
&lt;p>&lt;em>æç¤ºï¼šå¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯è‡ªæ‰˜ç®¡ Gitlab å®ä¾‹ï¼Œæ‚¨è¿˜éœ€è¦é…ç½® GITLAB_URL ä»¥æŒ‡å‘æ‚¨çš„å®ä¾‹ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ &lt;a href="http://gitlab.com/">gitlab.com&lt;/a>ï¼Œåˆ™ä¸éœ€è¦è¿™æ ·åšã€‚&lt;/em>&lt;/p>
&lt;p>æˆ‘åº”è¯¥æ³¨æ„ï¼Œå¦‚æœæ„å»ºå¤±è´¥ï¼Œç‰ˆæœ¬é˜¶æ®µä¸åº”å†æ¬¡è¿è¡Œï¼Œå› ä¸ºå®ƒå·²ç»ç”¨ç‰ˆæœ¬æ ‡è®°äº†æäº¤ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨çš„ CI/CD å·¥å…·å…è®¸æ‚¨ä»æ„å»ºé˜¶æ®µæ¢å¤å¤±è´¥çš„ç®¡é“ï¼Œåˆ™ä¸Šè¿°é¡ºåºæ˜¯åˆé€‚çš„ã€‚å¦‚æœæ­¤æ”¯æŒä¸å­˜åœ¨ï¼Œé‚£ä¹ˆæ‚¨éœ€è¦ï¼š&lt;/p>
&lt;p>åœ¨é‡æ–°è¿è¡Œç®¡é“ä¹‹å‰æ‰‹åŠ¨æ¸…ç†æ ‡ç­¾ï¼Œæˆ–è€…æ›´æ”¹ç®¡é“ä»¥ä½¿ç”¨ &lt;code>--dry-run&lt;/code> æ ‡å¿—æ‰§è¡Œè¯­ä¹‰å‘å¸ƒä»¥è·å–æ–°ç‰ˆæœ¬ï¼Œè¿è¡Œæ„å»ºå¹¶æœ€ç»ˆçœŸæ­£è¿è¡Œè¯­ä¹‰å‘å¸ƒã€‚&lt;/p>
&lt;h3 id="å°±æ˜¯è¿™æ ·">å°±æ˜¯è¿™æ ·ï¼&lt;/h3>
&lt;p>æˆ‘ä»¬åœ¨ç›¸å¯¹æˆåŠŸçš„é¡¹ç›®ä¸­ä½¿ç”¨äº†è¿™ç§æ–¹æ³•ï¼Œå°¤å…¶æ˜¯æ¯æ¬¡åˆå¹¶å‘å¸ƒé£æ ¼ã€‚&lt;/p>
&lt;p>æˆ‘å¿…é¡»å¯¹ä½ è¯´å®è¯ï¼Œå¦‚æœä½ æ²¡æœ‰å¥½çš„å·¥å…·ï¼Œä½ å°†éœ€è¦è‰¯å¥½çš„å¼€å‘äººå‘˜çºªå¾‹ã€‚ å¦‚æœæ‚¨ä¸¤è€…éƒ½æ²¡æœ‰ï¼Œé‚£ä¹ˆè¿™å¯èƒ½ä¸é€‚åˆæ‚¨ã€‚ ä½†æ˜¯ï¼Œå¦‚æœæ‚¨å¯ä»¥ä½¿ç”¨è¿™äº›æŠ€æœ¯ï¼Œé‚£ä¹ˆæ‚¨å°†æ°¸è¿œä¸å¿…è€ƒè™‘åœ¨æäº¤å’Œæ‹‰å–è¯·æ±‚ä¸­äº¤ä»˜çš„å†…å®¹ä¹‹åçš„ç‰ˆæœ¬æ§åˆ¶ã€‚&lt;/p></description></item></channel></rss>